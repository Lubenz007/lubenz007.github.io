<link rel="stylesheet" href="{{ '/assets/css/main.css' | relative_url }}">

<script>
// Convert code blocks with language-mermaid into div.mermaid and init Mermaid
(function(){
  function transformAndInit(){
    try{
      document.querySelectorAll('pre > code.language-mermaid, pre > code[data-lang="mermaid"]').forEach(function(code){
        var pre = code.parentElement;
        var div = document.createElement('div');
        div.className = 'mermaid';
        div.textContent = code.textContent;
        pre.parentNode.replaceChild(div, pre);
      });
      if(window.mermaid && typeof window.mermaid.init === 'function'){
        // Initialize mermaid on any newly-added .mermaid elements
        try{ window.mermaid.init(); }catch(e){ console.warn('mermaid.init() failed', e); }
      }
    }catch(e){ console.warn('mermaid transform failed', e); }
  }
  if(document.readyState === 'complete' || document.readyState === 'interactive'){
    transformAndInit();
  } else {
    document.addEventListener('DOMContentLoaded', transformAndInit);
    window.addEventListener('load', transformAndInit);
  }
})();
</script>
